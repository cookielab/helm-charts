global:
  container:
    image:
      repository: cookielab/deployer
      tag: 1.0.0-rc2
  imagePullSecrets:
    - my-registry-auth
    - private-registry-auth

components:
  api:
    type: http
    replicas: 2
    ports:
      - port: 3000
    probes:
      readinessProbe:
        httpGet:
          port: 8080
          path: /health-check
        periodSeconds: 30
        timeoutSeconds: 15
      livenessProbe:
        httpGet:
          port: 8080
          path: /health-check
    targetGroup:
      arn: 'arn:fake'
      securityGroupIds:
        - sg-fake
  
  consumer-foo:
    type: consumer
    command:
      - bin/cosume
    imagePullSecrets:
      - my-registry-auth-alt
  
  cj-bar:
    type: cronjob
    serviceAccountName: deployer2
    schedule: '10/* * * *'
    command:
      - bin/run-cron
    imagePullSecrets:
      - my-registry-auth-alt
  
  migrations:
    type: pre-job
    command:
      - bin/migrations
    imagePullSecrets:
      - my-registry-auth-alt