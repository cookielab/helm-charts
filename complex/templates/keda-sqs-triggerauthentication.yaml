{{- range $componentName, $component := .Values.components -}}
 {{- if and (not (empty $component.keda)) (not (empty $component.keda.sqs)) (not (eq (default "operator" $component.keda.sqs.identityOwner) "operator")) (default true (get $component.keda.sqs "triggerAuthEnabled")) }}
---
apiVersion: keda.sh/v1alpha1
kind: TriggerAuthentication
metadata:
  name: {{ $componentName }}-auth
spec:
  podIdentity:
    provider: aws
  {{- end }}
{{- end }}
